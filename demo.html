<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Display Orders</title>
<style>
    /* CSS styles */
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }
    .order-container {
        margin: 20px;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    .order-details {
        margin-bottom: 20px;
    }
    .product-list {
        list-style-type: none;
        padding: 0;
    }
    .product-item {
        margin-bottom: 10px;
    }
</style>
</head>
<body>

<!-- HTML structure -->
<div class="order-container" id="orders-container"></div>

<script>
    // Function to retrieve orders from local storage
    function retrieveOrders() {
        // Retrieve orders data from local storage
        var ordersJson = localStorage.getItem("formData");

        // Check if data exists in local storage
        if (ordersJson) {
            // Parse JSON strings back to objects
            var formData = JSON.parse(ordersJson);
            console.log(formData);
            // var orders = formData.orders;

            

            // Display each order
            formData.orderItems.forEach(function(order, index) {
                displayOrder(order, index);
            });
        } else {
            // If no data is found in local storage
            console.log("No orders found in local storage.");
        }
    }

    // Function to display a single order in the DOM
    function displayOrder(order, index) {
        console.log(order);
        // Create elements for order details
        var orderContainer = document.getElementById("orders-container");
        var orderDiv = document.createElement("div");
        orderDiv.classList.add("order-details");
        orderDiv.innerHTML = `<h2>Order ${index + 1}</h2>
                              <div><strong>Name:</strong> ${order.name}</div>
                              <div><strong>Email:</strong> ${order.email}</div>
                              <div><strong>Phone:</strong> ${order.phone}</div>
                              <div><strong>Address:</strong> ${order.address}</div>
                              <div><strong>Pincode:</strong> ${order.pincode}</div>`;

        // Create list for product details
        var productList = document.createElement("ul");
        productList.classList.add("product-list");
        order.orderItems.forEach(function(item) {
            var listItem = document.createElement("li");
            listItem.classList.add("product-item");
            listItem.innerHTML = `<strong>Product Name:</strong> ${item.title}<br>
                                  <strong>Price:</strong> ${item.price}<br>
                                  <strong>Quantity:</strong> ${item.quantity}<br>
                                  <img src="${item.image}" alt="${item.title}" style="max-width: 100px; max-height: 100px;">`;
            productList.appendChild(listItem);
        });

        // Append product list to order details
        orderDiv.appendChild(productList);

        // Append order details to container
        orderContainer.appendChild(orderDiv);
    }

    // Retrieve orders when the page loads
    window.onload = retrieveOrders;
</script>


</body>
</html>
